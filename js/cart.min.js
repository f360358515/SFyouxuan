"use strict";$(function(){var t=$.cookie("name"),l=$.cookie("token");if($(".hd_place").mouseenter(function(){$(".hd_ul").show()}),$(".hd_place").mouseleave(function(){$(".hd_ul").hide()}),$("#hd_tx3,#hd_tx5,#hd_tx6").hover(function(t){$(this).find("ul").stop().slideToggle(),t.stopPropagation()}),$("#in_tx13").click(function(){window.location.href="index.html"}),$("#in_tx12").click(function(){location.href="che.html"}),t&&"null"!=t){$(".hd_tx1,.hd_tx2").css({display:"none"}),$("#in_jjc").html("用户<span id='in_yhm'>"+t+"</span>已登录！<span id='in_zx'>注销</span>"),$("#in_zx").click(function(){window.location.href="che.html",$.cookie("name",null)});Number($.cookie("token"));$.get("http://47.104.244.134:8080/cartlist.do",{token:l}).done(function(t){console.log(t);for(var a,e,n='<tr class="tab-v31-tr">\n\t\t\t\t\t<th width="60">全选</th>\n\t\t\t\t\t<th width="540">订单商品</th>\n\t\t\t\t\t<th width="120">单价</th>\n\t\t\t\t\t<th width="120">数量</th>\n\t\t\t\t\t<th width="120">优惠</th>\n\t\t\t\t\t<th width="120">小计</th>\n\t\t\t\t\t<th width="120">操作</th>\n\t\t\t\t</tr>',o=0;o<t.length;o++)n+='\n\t\t\t<tr class="addline">\n\t\t\t\t<td class="tab-zdcon-line">\n\t\t\t\t\t<input type="checkbox" />\n\t\t\t\t</td>\n\t\t\t\t<td class="tab-zdcon-line tab-zdcon-add">\n\t\t\t\t\t<div class="tb3-con">\n\t\t\t\t\t\t<div class="tb3-divtu">\n\t\t\t\t\t\t\t<a class="xq" target="_blank">\n\t\t\t\t\t\t\t\t<img src="'+t[o].goods.picurl+'" />\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tb3-divti">\n\t\t\t\t\t\t\t<a class="xq" target="_blank">\n                            '+t[o].goods.name+'\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t\t<td class="tab-zdcon-line">￥<span class="danjia">'+t[o].goods.price+'</span></td>\n\t\t\t\t<td class="tab-zdcon-line">\n\t\t\t\t\t<div class="cart-num">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="cart-numa">-</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<input type="text" class="cartnum-value" value="'+t[o].count+'"/>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="cart-numb">+</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t\t<td class="tab-zdcon-line">\n\t\t\t\t\t<span><p>￥0.00</p></span>\n\t\t\t\t</td>\n\t\t\t\t<td class="tab-zdcon-line">\n\t\t\t\t\t￥<em class="zongjia">'+t[o].goods.price*t[o].count+'</em>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<a class="tabdiv-del">删除</a>\n\t\t\t\t\t</p>\n\t\t\t\t</td>\n\t\t\t</tr>';$(".tab-zdcon").html(n);for(var i=function(n){a=$(".cartnum-value").eq(n).val(),$(".cart-numa").eq(n).click(function(){$.get("http://47.104.244.134:8080/cartlist.do",{token:l}).done(function(t){for(var n=0,a=0;a<t.length;a++)n+=t[a].count;if(console.log(t),n=String(n),$.cookie("cartNum",n,{expires:7}),$.cookie("cartNum")){n=$.cookie("cartNum");$(".num").text(n)}}),a=Number($(".cartnum-value").eq(n).val()),(a-=1)<=0&&(a=0,$.get("http://47.104.244.134:8080/cartupdate.do",{id:t[n].id,gid:t[n].gid,num:0,token:l}).done(function(t){$(".addline").eq(n).remove(),location.href="cart.html"})),a=String(a),$(".cartnum-value").eq(n).val(a),e=parseInt($(".danjia").eq(n).text()),console.log(e),$(".zongjia").eq(n).text(e*a),$.get("http://47.104.244.134:8080/cartupdate.do",{id:t[n].id,gid:t[n].gid,num:-1,token:l}).done(function(t){console.log(t)})}),$(".cart-numb").eq(n).click(function(){$.get("http://47.104.244.134:8080/cartlist.do",{token:l}).done(function(t){for(var n=0,a=0;a<t.length;a++)n+=t[a].count;if(console.log(t),n=String(n),$.cookie("cartNum",n,{expires:7}),$.cookie("cartNum")){n=$.cookie("cartNum");$(".num").text(n)}}),a=Number($(".cartnum-value").eq(n).val()),50<(a+=1)&&(a=50,alert("库存不够,请再看看其他产品")),a=String(a),$(".cartnum-value").eq(n).val(a),e=parseInt($(".danjia").eq(n).text()),console.log(e),$(".zongjia").eq(n).text(e*a),$.get("http://47.104.244.134:8080/cartupdate.do",{id:t[n].id,gid:t[n].gid,num:1,token:l}).done(function(t){console.log(t)})}),e=parseInt($(".danjia").eq(n).text()),$(".zongjia").eq(n).text(e*a)},c=0;c<$(".cartnum-value").length;c++)i(c)})}});